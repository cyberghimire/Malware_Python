import subprocess
import optparse


def get_arguments():

    parser = optparse.OptionParser()

    parser.add_option('-i', '--interface', dest='interface',
                      help='Name of the interface')
    parser.add_option('-m', '--mac', dest='new_mac',
                      help='New MAC(XX:XX:XX:XX:XX:XX)'
                      )
    return parser.parse_args()


def changemac(interface, new_mac):

    print(f'Changing the MAC address of {interface} to {new_mac} ...')

    subprocess.call(f'sudo ip link set dev {interface} down', shell=True)
    subprocess.call(
        f'sudo ip link set dev {interface} address {new_mac}',  shell=True)
    subprocess.call(f'sudo ip link set dev {interface} up', shell=True)


(value, argument) = get_arguments()
changemac(value.interface, value.new_mac)
